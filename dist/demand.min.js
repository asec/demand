!function(){String.prototype.format||(String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})});var a={settings:{_settings:{},set:function(a,b){this._settings[a]=b},get:function(a){return"undefined"!=typeof this._settings[a]?this._settings[a]:null}},lang:{},packages:{},init:function(){},registerPackage:function(b,c,d){return d=d||"default",b&&c?("undefined"==typeof this.packages[b]&&(this.packages[b]={}),"undefined"==typeof this.packages[b][c]&&(this.packages[b][c]={}),"undefined"==typeof this.packages[b][c][d]&&(this.packages[b][c][d]={}),this.packages[b][c][d].loaded=!1,void(this.packages[b][c][d].queue=new a.Queue)):(console.error(this.lang.PACKAGE_ERROR_CANTREGISTER),!1)},execute:function(a,b){b=b;var c=this.parseMarker(a),d=c.packageName,e=c.pack,f=(typeof b).toLowerCase();if("function"!==f&&"undefined"!==f)return console.error(this.lang.EXEC_ERROR_NOTFUNCTION),!1;if("function"===f&&e.queue.add(b),e.loaded)e.queue.execute();else{var g=this.assembleUrl(d),h=document.createElement("script");h.type="text/javascript",h.src=g,h.async=!0,document.getElementsByTagName("head")[0].appendChild(h)}},loaded:function(a){var b=this.parseMarker(a);if(!b)return!1;var c=b.pack;return c.loaded?!0:(console.log(this.lang.DOWNLOAD_SUCCESS.format(b.packageName)),c.loaded=!0,void demand(b.packageName))},parseMarker:function(a){var b=a.split(".");if(!b[0]||!b[1])return console.error(this.lang.PACKAGE_ERROR_CANTPARSENAME),!1;var c={family:b[0],"package":b[1],subpackage:b[2]||"default"};return"undefined"==typeof this.packages[c.family]||"undefined"==typeof this.packages[c.family][c["package"]]||"undefined"==typeof this.packages[c.family][c["package"]][c.subpackage]?(console.error(this.lang.PACKAGE_ERROR_NOTFOUND.format(c.family+"."+c["package"]+("default"!==c.subpackage?"."+c.subpackage:""))),!1):(c.pack=this.packages[c.family][c["package"]][c.subpackage],c.packageName=c.family+"."+c["package"]+"."+c.subpackage,c)},assembleUrl:function(a){var b=this.settings.get("cdnUrl"),c=b+a+".js";return c}};a.init(),a.Queue=function(){this._queue=[]},a.Queue.prototype.add=function(a){var b=(typeof a).toLowerCase();return"function"!==b?(console.error(this.lang.EXEC_ERROR_NOTFUNCTION),!1):(this._queue.push(a),!0)},a.Queue.prototype.executeNext=function(){if(!this._queue.length)return!1;var a=this._queue.shift();a.call(window)},a.Queue.prototype.execute=function(){for(;this._queue.length;)this.executeNext()},a.lang={PACKAGE_ERROR_CANTREGISTER:"You can't register a demand package without it's family and package name!",PACKAGE_ERROR_CANTPARSENAME:"In order to demand a package you need to address it in the following format: family.package[.subpackage]",PACKAGE_ERROR_NOTFOUND:"The package could not be found: {0}",EXEC_ERROR_NOTFUNCTION:"You can only execute functions on demand.",DOWNLOAD_SUCCESS:"Demanded package successfully loaded: {0}"},a.settings.set("cdnUrl","http://localhost/demand/dist/packages/"),a.registerPackage("jquery","latest");var b=function(a,b){var c=this.demand.demandObject;return c.execute(a,b)};b.demandObject=a,demand=b}();